<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Acme Corp Feedback Portal</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#f4f4f9; min-height:100vh;}
    header { background:#2c3e50; color:white; padding:2rem 1rem 1.5rem 1rem; text-align:center; letter-spacing:1px; font-size:2.3rem; }
    main {
      padding:2.5rem 2rem 2rem 2rem; max-width:520px; margin:2.5rem auto 0 auto;
      box-shadow:0 8px 24px rgba(44,62,80,0.07), 0 2px 6px rgba(44,62,80,0.12);
      background:#fff; border-radius:16px; position:relative;
    }
    label { display:block; margin-top:1rem; font-weight:bold; font-size:1.09rem; }
    textarea { width:100%; padding:0.7rem; margin-top:0.5rem;
      border:1px solid #bdd5ea; border-radius:6px; font-size:1.05rem;
      min-height:60px; transition:.2s; background:#fafdff;
    }
    textarea:focus { outline:none; border-color:#2980b9; background:#fff;}
    button { margin-top:1.2rem; padding:0.85rem 1.7rem; font-size: 1.12rem;
      background:#2980b9; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:500; transition:.18s;
    }
    button:hover { background:#1f6391; }
    #response {
      margin-top:1.5rem; padding:0.9rem 1.1rem; border-radius:6px;
      font-weight:500; font-size:1.12rem; background:#eafaf1; color:#12723f;
      border-left:5px solid #6ecd7f; box-shadow:0 2px 10px 0 rgba(30,50,70,.04);
      transition:background.3s,color .3s;
      display: flex; align-items: center; gap: 0.7em;
      min-height: 2.2em;
    }
    #response.error {
      background:#fbeaea; color:#990c22; border-left:5px solid #dd6262;
    }
    #logs {
      margin-top:1.35rem; font-family:monospace; font-size:1.04rem;
      color:#2c3e50; background:#f9f9f9; padding:1rem 1.3rem; border-radius:6px;
      max-height:250px; overflow:auto; border:1px solid #dde;
      white-space: pre-wrap; box-shadow:0 2px 8px rgba(0,0,0,0.04);
      display:none;
      transition:all .2s;
    }
    #toggle-logs {
      background:none; border:none; color:#2980b9; cursor:pointer;
      font-size:1.07rem; font-family:inherit; font-weight:500; padding:0; margin-top:1.1rem; margin-bottom:0.7rem;
      text-decoration:underline;
      display:none;
      transition:color .15s;
    }
    #toggle-logs:hover { color:#1b567a; }
    @media (max-width:700px) {
      main { padding:1.3rem 0.5rem; }
      header { font-size:1.4rem; padding:1.2rem 0.5rem; }
    }
    .icon {
      width: 1.4em; height: 1.4em; display: inline-block; vertical-align: middle;
    }
  </style>
</head>
<body>
  <header>
    Acme Corp Feedback Portal
  </header>
  <main>
    <p style="font-size:1.1rem;">We value your feedback.</p>
    <label for="feedback">Your Feedback</label>
    <textarea id="feedback" rows="4" maxlength="200"
              placeholder="Type here..." autocomplete="off"></textarea>
    <button id="submitBtn">Submit Feedback</button>
    <div id="response"></div>
    <button id="toggle-logs">Show Logs</button>
    <div id="logs"></div>
  </main>
  <script>
    const submitBtn   = document.getElementById('submitBtn');
    const responseDiv = document.getElementById('response');
    const logsDiv     = document.getElementById('logs');
    const toggleLogs  = document.getElementById('toggle-logs');

    function setResponse(message, isError) {
      responseDiv.textContent = '';
      responseDiv.className = isError ? 'error' : '';
      const icon = document.createElement('span');
      icon.className = 'icon';
      icon.innerHTML = isError
        ? '<svg height="100%" width="100%" viewBox="0 0 24 24" fill="#cb2431"><circle cx="12" cy="12" r="10" fill="#fbd9d7"/><path stroke="#cb2431" stroke-width="2" d="M8 8l8 8M16 8l-8 8"/></svg>'
        : '<svg height="100%" width="100%" viewBox="0 0 24 24" fill="#12723f"><circle cx="12" cy="12" r="10" fill="#dceddf"/><path stroke="#12723f" stroke-width="2" d="M7 13l3 3 6-6"/></svg>';
      responseDiv.appendChild(icon);
      const span = document.createElement('span');
      span.textContent = " " + message;
      responseDiv.appendChild(span);
    }

    toggleLogs.onclick = () => {
      logsDiv.style.display = logsDiv.style.display === "none" ? "block" : "none";
      toggleLogs.textContent = logsDiv.style.display === "none" ? "Show Logs" : "Hide Logs";
    };

    submitBtn.onclick = () => {
      setResponse('Submitting...', false);
      logsDiv.textContent = '';
      logsDiv.style.display = 'none';
      toggleLogs.style.display = 'none';

      const feedback = document.getElementById('feedback').value;
      fetch('/submit-feedback', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ feedback })
      })
      .then(res => res.json())
      .then(data => {
        setResponse(data.message, data.message.includes("Denial-of-Service"));
        logsDiv.textContent = data.logs.join('\n');
        toggleLogs.style.display = "block";
        if(data.message.includes("Denial-of-Service")){
          logsDiv.style.display = "block";
          toggleLogs.textContent = "Hide Logs";
        } else {
          logsDiv.style.display = "none";
          toggleLogs.textContent = "Show Logs";
        }
      })
      .catch(err => {
        setResponse("DoS triggered! " + err, true);
      });
    };
  </script>
</body>
</html>
